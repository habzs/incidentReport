<!DOCTYPE html>
<html>

<head>
    <title>Incident report generator</title>
    <div>
        <h1 style="padding:5%;">7th coy Incident report generator</h1>
    </div>
</head>

<body>

    <div class="mui-container-fluid">
        <form id="form1" class="mui-form" style="margin:left;width:50%;">
            <div class="mui-textfield mui-textfield--float-label">
                <input type="number" id="fourDigits" name="fourDigits">
                <label for="fourDigits">4D:</label>
            </div>

            <div class="mui-textfield mui-textfield--float-label">
                <input type="text" id="name" name="name">
                <label for="name">Name:</label>
            </div>

            <div class="mui-textfield mui-textfield--float-label">
                <input type="text" id="reason" name="reason">
                <label for="reason">Reason:</label>
            </div>

            <div class="mui-row" id="statusBiggerDiv">
                <div class="mui-textfield mui-textfield--float-label mui-col-xs-6">
                    <input type="text" id="status1" name="status1">
                    <label for="status1">Status:</label>
                </div>

                <div class="mui-textfield mui-textfield--float-label mui-col-xs-6">
                    <input type="number" id="day1" name="day1">
                    <label for="day1">Days:</label>
                </div>
            </div>

        </form>
    </div>

    <button onclick="addStatus()">+</button>
    <button onclick="generateOutput()">Generate</button><br><br>

    <textarea id="outputTextArea" rows="4" cols="50">This is a test!</textarea>

</body>

<script>

    var output = "";
    var statusCounter = 1;
    var statusOutput = [];
    var statusBox = 0;
    var lister = "";

    function addStatus(){
        statusCounter++;

        // --- STATUS GENERATION ---
        var statusDiv = document.createElement("div");
        statusDiv.setAttribute("class", "mui-textfield mui-textfield--float-label mui-col-xs-6");
        statusDiv.setAttribute("id", "statusDiv" + statusCounter);
        document.getElementById("statusBiggerDiv").appendChild(statusDiv);

        var statusInput = document.createElement("INPUT");
        statusInput.setAttribute("type", "text");
        statusInput.setAttribute("id", "status" + statusCounter);
        document.getElementById("statusDiv" + statusCounter).appendChild(statusInput);

        var statusLabel = document.createElement("LABEL");
        statusLabel.textContent = "Status: ";
        document.getElementById("statusDiv" + statusCounter).appendChild(statusLabel);

        // ---

        // --- DAY GENERATION ---

        var dayDiv = document.createElement("div");
        dayDiv.setAttribute("class", "mui-textfield mui-textfield--float-label mui-col-xs-6");
        dayDiv.setAttribute("id", "dayDiv" + statusCounter);
        document.getElementById("statusBiggerDiv").appendChild(dayDiv);

        var dayInput = document.createElement("INPUT");
        dayInput.setAttribute("type", "number");
        dayInput.setAttribute("id", "day" + statusCounter);
        document.getElementById("dayDiv" + statusCounter).appendChild(dayInput);

        var dayLabel = document.createElement("LABEL");
        dayLabel.textContent = "Days: ";
        document.getElementById("dayDiv" + statusCounter).appendChild(dayLabel);

        // ---
    }

    var today = new Date();
    var day, month, year;
    var currentDate;

    var dd = today.getDate();
    var mm = today.getMonth()+1;
    var yy = 20;

    function generateOutput(){

        statusOutput = [];
        
        formInput = document.getElementById("form1");

        fourDigits = formInput.elements[0].value;
        name = formInput.elements[1].value;
        reason = formInput.elements[2].value;
        
        // statusBox is box ID, statusCounter is the number of boxes there are.
        // loops through number of boxes, and adds it into the array.
        for (let i=0; i<statusCounter; i++) {
            statusBox = i + 1;

            // Adds number of days
            statusOutput[i] = formInput.elements.namedItem("day" + statusBox).value + " days";
            // Adds status
            statusOutput[i] += " " + formInput.elements.namedItem("status" + statusBox).value;


            
            // Adds date
            futureDD = parseInt(dd) + parseInt(formInput.elements.namedItem("day" + statusBox).value);

            // Adds "0" if day/month is only 1 digit.
            if (dd < 10) {
                dd = "0" + dd;
            }

            if (mm < 10) {
                mm = "0" + mm;
            }
            
            endDate = futureDD.toString() + mm + yy;
            currentDate = dd + mm + yy;

            statusOutput[i] += " (" + currentDate+ "-" + endDate + ")";
            

            console.log(statusOutput);

            console.log("type of dd: " + typeof(dd));

            console.log("futureDate: " + futureDD);
            console.log("currentDate: " + currentDate);


            // Resets manipulated dd and mm
            dd = today.getDate();
            mm = today.getMonth() + 1;

        }

        console.log("statusBox: " + statusBox);
        console.log("statusCounter: " + statusCounter);

        statusOutput.forEach(outputFunc);
        output = fourDigits + " REC " + name + " has finished reporting sick at RHMC for " + reason + " and received " + lister;
        lister = "";

        document.getElementById("outputTextArea").innerHTML = output;

    }

    function outputFunc(item, index) {
    lister += item + ", ";
    }

    <!-- 2304 REC TRISTAN TOK YANG JUN has finished reporting sick at RHMC for open wound and received 5 days EX RMJ (040420-080420). -->


</script>

<link href="//cdn.muicss.com/mui-0.10.1/css/mui.min.css" rel="stylesheet" type="text/css" />
<script src="//cdn.muicss.com/mui-0.10.1/js/mui.min.js"></script>

</html>